
<div class="row width-90p">
  <h4>ショッピングカート</h4>
  <div class="right-send">
  <%= link_to "カートを空にする", cart_item_destroy_all_path, method: :delete, class: 'btn btn-danger' %>
  </div>
</div>

<table class="width-90p space_30">

  <thead>
    <tr>
      <th class="table-boder width-40p none-padding">商品名</th>
      <th class="table-boder width-15p none-padding">単価(税込)</th>
      <th class="table-boder width-15p none-padding">数量</th>
      <th class="table-boder width-15p none-padding">小計</th>
      <th colspan="1" class="table-boder width-15p none-padding"></th>
    </tr>
  </thead>

  <tbody>
    <% @cart_items.each do |cart_item| %>
    <tr>
      <td class="table-boder none-padding">
        <div class="left-space-50"><%= cart_item.item.name %></div>
      </td>
      <td class="table-boder none-padding"><%= cart_item.item.with_tax_price.to_s(:delimited, delimiter: ",") %></td>
      <td class="table-boder none-padding">
        <div class="cell-center">
          <%= form_with model: @cart_item, url: cart_item_path(cart_item.id), method: :patch do |f| %>
            <%= f.select :amount, *[1..3], include_blank: "#{cart_item.amount}" %>
            <%= f.submit '変更', class: 'btn btn-success' %>
          <% end %>
        </div>
      </td>
      <td class="table-boder none-padding"><%= cart_item.subtotal.to_s(:delimited, delimiter: ",") %></td>
      <% @total += cart_item.subtotal %>
      <td class="table-boder none-padding cell-center"><%= link_to "削除する", cart_item_path(cart_item.id), method: :delete, class: 'btn btn-danger' %></td>
    </tr>
    <% end %>
  </tbody>

</table>


<div class="flex width-90p">
  <div>
    <%= link_to "買い物を続ける", root_path, class: 'btn btn-primary' %>
  </div>

  <div class="right-send">
    <table>
      <tr>
        <th class="table-boder">合計金額</th>
        <td class="table-boder"><%= @total.to_s(:delimited, delimiter: ",") %></td>
      </tr>
    </table>
  </div>
</div>

<div class="text-center">
  <%= link_to "情報入力に進む", new_order_path, class: 'btn btn-success' %>
</div>
